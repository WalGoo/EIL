영속성 컨텍스트란?

- Entity를 영구 저장하는 환경

- 어플리케이션과 DB 사이에서 객체를 보관하는 가상의 DB 역할

- 서비스별로 하나의 EntityManager Factory 존재, DB에 접근하는 Transaction이 발생할 때마다

  쓰레드 별로 Entity Manager를 생성하여 영속성 컨텍스트에 접근

- EntityManager에 Entity를 저장하거나 조회하면 EntityManager는 영속성 컨텍스트에

  Entity를 보관하고 관리한다.

- 영속성 컨텍스트는 EntityManager를 생성할 때 만들어지며, EntityManager를 통해 

  영속성 컨텍스트에 접근하고 관리한다.

![img](https://velog.velcdn.com/images%2Fseongwon97%2Fpost%2F1f89ead1-6910-407a-afd2-865eef68079f%2Fimage.png)

EntityManager

- EntityManager는 영속성 컨텍스트 내에서 Entity들을 관리한다.
- EntityManager는 JPA에서 제공하는 Interface 이다. => Bean으로 등록되어 있음
- EntityManager는 Entity Cache를 가지고 있다.
- Query Method, JpaRepository는 직접적인 EntityManager 사용을 하지 않도록 해준 것



![img](https://media.vlpt.us/images/neptunes032/post/ecd3b113-862f-4158-a208-e1eeec92d61d/image.png)



------



영속성 컨텍스트에 대한 마인드맵



![img](https://raw.githubusercontent.com/WalGoo/EIL/Jpa/Jpa/%EC%98%81%EC%86%8D%EC%84%B1%20%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%A0%95%EB%A6%AC.jpg)
